# =========================
# ‰ª£ÁêÜËÆ¢ÈòÖ
# =========================
ProxyProvidersSet: &ProxyProvidersSet
  type: http
  proxy: DIRECT
  interval: 86400
  health-check:
    enable: true
    url: "https://www.gstatic.com/generate_204"
    interval: 600
  override:
    udp: true
    additional-prefix: ""
    skip-cert-verify: true
  exclude-filter: "(?i)(ËøáÊúüÊó∂Èó¥)|(Ââ©‰ΩôÊµÅÈáè)|(TGÁæ§)|(ÂÆòÁΩë)"

proxy-providers:
  # Êú∫Âú∫ÂêçÁß∞
  sub1:
    # Êú∫Âú∫ËÆ¢ÈòÖÂú∞ÂùÄ
    url: https://your-subscribe.example.com/sub1?token=xxxxx
    path: "./proxy_provider/sub1.yaml"
    <<: *ProxyProvidersSet
    override:
      additional-prefix: "sub1-"
    # ËÆ¢ÈòÖËäÇÁÇπÁöÑ User-Agent
    header:
      User-Agent:
        - passwall
  sub2:
    # Êú∫Âú∫ËÆ¢ÈòÖÂú∞ÂùÄ
    url: https://your-subscribe.example.com/sub2?token=xxxxx
    path: "./proxy_provider/sub2.yaml"
    <<: *ProxyProvidersSet
    override:
      additional-prefix: "sub2-"

# =========================
# Âü∫Á°ÄÈÖçÁΩÆ
# =========================
mixed-port: 7890
allow-lan: true
mode: rule
ipv6: false
log-level: warning
tcp-concurrent: true

find-process-mode: strict

# =========================
# Â§ñÈÉ®ÊéßÂà∂Âô®ÈÖçÁΩÆ
# =========================
external-controller: 0.0.0.0:9090
secret: "1234456"

# =========================
# Á´ØÂè£ÁõëÂê¨ÈÖçÁΩÆÔºàÂèØÈÄâÔºâ
# ‰æãÂ¶ÇÔºö
#  - Steam Âº∫Âà∂ÁæéÂå∫
#  - TikTok Âº∫Âà∂Âè∞Êπæ
#  - ChatGPT Âº∫Âà∂ÁæéÂõΩ
# =========================
# listeners:
#   - { name: mixed0, type: mixed, port: 42000, proxy: üöÄ Êñ∞Âä†Âù° }
#   - { name: mixed1, type: mixed, port: 42001, proxy: üöÄ È¶ôÊ∏Ø }
#   - { name: mixed2, type: mixed, port: 42002, proxy: üöÄ Âè∞Êπæ }
#   - { name: mixed3, type: mixed, port: 42002, proxy: üöÄ Âç∞Â∞º }

# =========================
# ÈÖçÁΩÆÊñá‰ª∂ÁÆ°ÁêÜ
# =========================
profile:
  store-selected: true
  store-fake-ip: true

proxies:
  # ÈìæÂºè‰ª£ÁêÜ
  # - name: üöÄ ÈìæÂºèÂá∫Âè£
  #   type: socks5
  #   server:
  #   port:
  #   username:
  #   password:
  #   dialer-proxy: üöÄ È¶ôÊ∏Ø

# =========================
# ‰ª£ÁêÜÁªÑÈÖçÁΩÆ
# =========================
# - include-all-proxies: true  ÂåÖÂê´ÊâãÂä®ËäÇÁÇπ
# - use: [ËÆ¢ÈòÖ1, ËÆ¢ÈòÖ2, ËÆ¢ÈòÖ3, ËÆ¢ÈòÖ4, ËÆ¢ÈòÖ5] ÂåÖÂê´ËÆ¢ÈòÖËäÇÁÇπ
# - domain-strategy: ipv4-only Âº∫Âà∂‰ªÖ‰ΩøÁî® IPv4
# =========================

### Á≠ñÁï•ÁªÑÂü∫Á°ÄÈÖçÁΩÆ
Select: &Select
  type: select
  url: "https://www.gstatic.com/generate_204"
  disable-udp: false
  hidden: false
  include-all: true

UrlTest: &UrlTest
  type: url-test
  url: "https://www.gstatic.com/generate_204"
  interval: 180
  lazy: true
  tolerance: 50
  timeout: 2000
  disable-udp: false
  max-failed-times: 3
  hidden: true
  include-all: true

FallBack: &FallBack
  type: fallback
  url: "https://www.gstatic.com/generate_204"
  interval: 180
  lazy: true
  timeout: 2000
  disable-udp: false
  max-failed-times: 3
  hidden: true
  include-all: true

LoadBalance: &LoadBalance
  type: load-balance
  url: "https://www.gstatic.com/generate_204"
  interval: 180
  lazy: true
  disable-udp: false
  strategy: consistent-hashing
  timeout: 2000
  max-failed-times: 3
  hidden: true
  include-all: true

proxy-groups:
  - name: üöÄ ËäÇÁÇπÈÄâÊã©
    type: select
    proxies:
      - ‚ö° Ëá™Âä®ÈÄâÊã©
      - üñêÔ∏è ÊâãÂä®ÂàáÊç¢
      - üöÄ È¶ôÊ∏Ø
      - üöÄ Âè∞Êπæ
      - üöÄ Êó•Êú¨
      - üöÄ Êñ∞Âä†Âù°
      - üöÄ ÁæéÂõΩ
      - üöÄ ÂÖ∂‰ªñ
      # - üöÄ ÈìæÂºèÂá∫Âè£
      - DIRECT
      - REJECT

  - name: ‚ö° Ëá™Âä®ÈÄâÊã©
    <<: *UrlTest
    hidden: false
    filter: ^((?!(Áõ¥Ëøû|DIRECT|ÊãíÁªù|REJECT)).)*$

  - name: üñêÔ∏è ÊâãÂä®ÂàáÊç¢
    <<: *Select
    filter: ^((?!(Áõ¥Ëøû|DIRECT|ÊãíÁªù|REJECT)).)*$

  - type: select
    name: üõë ÂπøÂëäÊã¶Êà™
    proxies: &node-select-proxies
      - üöÄ ËäÇÁÇπÈÄâÊã©
      - ‚ö° Ëá™Âä®ÈÄâÊã©
      - üñêÔ∏è ÊâãÂä®ÂàáÊç¢
      - üöÄ È¶ôÊ∏Ø
      - üöÄ Âè∞Êπæ
      - üöÄ Êó•Êú¨
      - üöÄ Êñ∞Âä†Âù°
      - üöÄ ÁæéÂõΩ
      - üöÄ ÂÖ∂‰ªñ
      # - üöÄ ÈìæÂºèÂá∫Âè£
      - DIRECT
      - REJECT

  - type: select
    name: üí¨ AI ÊúçÂä°
    proxies: *node-select-proxies
  - type: select
    name: üì∫ ÂìîÂì©ÂìîÂì©
    proxies: *node-select-proxies
  - type: select
    name: üìπ Ê≤πÁÆ°ËßÜÈ¢ë
    proxies: *node-select-proxies
  - type: select
    name: üîç Ë∞∑Ê≠åÊúçÂä°
    proxies: *node-select-proxies
  - type: select
    name: üè† ÁßÅÊúâÁΩëÁªú
    proxies: *node-select-proxies
  - type: select
    name: üéØ ÂÖ®ÁêÉÁõ¥Ëøû
    proxies: *node-select-proxies
  - type: select
    name: üì≤ ÁîµÊä•Ê∂àÊÅØ
    proxies: *node-select-proxies
  - type: select
    name: üê± Github
    proxies: *node-select-proxies
  - type: select
    name: ‚ìÇÔ∏è ÂæÆËΩØÊúçÂä°
    proxies: *node-select-proxies
  - type: select
    name: üçè ËãπÊûúÊúçÂä°
    proxies: *node-select-proxies
  - type: select
    name: üåê TikTok
    proxies: *node-select-proxies
  - type: select
    name: üåê Á§æ‰∫§Â™í‰Ωì
    proxies: *node-select-proxies
  - type: select
    name: üé¨ ÊµÅÂ™í‰Ωì
    proxies: *node-select-proxies
  - type: select
    name: üéÆ Ê∏∏ÊàèÂπ≥Âè∞
    proxies: *node-select-proxies
  - type: select
    name: üìö ÊïôËÇ≤ËµÑÊ∫ê
    proxies: *node-select-proxies
  - type: select
    name: üí∞ ÈáëËûçÊúçÂä°
    proxies: *node-select-proxies
  - type: select
    name: ‚òÅÔ∏è ‰∫ëÊúçÂä°
    proxies: *node-select-proxies
  - type: select
    name: üåê ÂÖ®ÁêÉ‰ª£ÁêÜ
    proxies: *node-select-proxies
  - type: select
    name: üêü ÊºèÁΩë‰πãÈ±º
    proxies: *node-select-proxies

  # È¶ôÊ∏ØÁªÑ
  - name: üöÄ È¶ôÊ∏Ø
    <<: *LoadBalance
    hidden: false
    filter: "(?=.*(ÂπøÊ∏Ø|È¶ôÊ∏Ø|HK|Hong Kong|üá≠üá∞|HongKong)).*$"

  # Âè∞ÊπæÁªÑ
  - name: üöÄ Âè∞Êπæ
    <<: *FallBack
    hidden: false
    filter: "(?=.*(ÂπøÂè∞|Âè∞Êπæ|Âè∞ÁÅ£|TW|Tai Wan|üáπüáº|üá®üá≥|TaiWan|Taiwan)).*$"
    exclude-filter: "(?=.*(Âè∞Êπæ3)).*$"

  # Êó•Êú¨ÁªÑ
  - name: üöÄ Êó•Êú¨
    type: select
    include-all: true
    filter: "(?=.*(ÂπøÊó•|Êó•Êú¨|JP|Â∑ùÊó•|‰∏ú‰∫¨|Â§ßÈò™|Ê≥âÊó•|ÂüºÁéâ|Ê≤™Êó•|Ê∑±Êó•|üáØüáµ|Japan)).*$"

  # Êñ∞Âä†Âù°ÁªÑ
  - name: üöÄ Êñ∞Âä†Âù°
    <<: *LoadBalance
    hidden: false
    filter: "(?=.*(ÂπøÊñ∞|Êñ∞Âä†Âù°|SG|Âù°|ÁãÆÂüé|üá∏üá¨|Singapore)).*$"
    exclude-filter: "(?=.*(Êñ∞Âä†Âù°1|VIP1|vip1)).*$"

  # ÁæéÂõΩÁªÑ
  - name: üöÄ ÁæéÂõΩ
    type: select
    include-all: true
    filter: "(?=.*(ÂπøÁæé|US|ÁæéÂõΩ|Á∫ΩÁ∫¶|Ê≥¢ÁâπÂÖ∞|ËææÊãâÊñØ|‰øÑÂãí|Âá§Âá∞Âüé|Ë¥πÂà©Ëíô|Ê¥õÊùâ|Âú£‰ΩïÂ°û|Âú£ÂÖãÊãâ|Ë•øÈõÖ|ËäùÂä†|üá∫üá∏|United States)).*$"

  # ÂÖ∂‰ªñÁªÑ
  - name: üöÄ ÂÖ∂‰ªñ
    type: select
    include-all: true
    filter: "^((?!(Áõ¥Ëøû|DIRECT|ÊãíÁªù|REJECT|ÂπøÊ∏Ø|È¶ôÊ∏Ø|HK|Hong Kong|üá≠üá∞|HongKong|ÂπøÂè∞|Âè∞Êπæ|Âè∞ÁÅ£|TW|Tai Wan|üáπüáº|üá®üá≥|TaiWan|Taiwan|ÂπøÊó•|Êó•Êú¨|JP|Â∑ùÊó•|‰∏ú‰∫¨|Â§ßÈò™|Ê≥âÊó•|ÂüºÁéâ|Ê≤™Êó•|Ê∑±Êó•|üáØüáµ|Japan|ÂπøÊñ∞|Êñ∞Âä†Âù°|SG|Âù°|ÁãÆÂüé|üá∏üá¨|Singapore|ÂπøÁæé|US|ÁæéÂõΩ|Á∫ΩÁ∫¶|Ê≥¢ÁâπÂÖ∞|ËææÊãâÊñØ|‰øÑÂãí|Âá§Âá∞Âüé|Ë¥πÂà©Ëíô|Ê¥õÊùâ|Âú£‰ΩïÂ°û|Âú£ÂÖãÊãâ|Ë•øÈõÖ|ËäùÂä†|üá∫üá∏|United States)).)*$"

# =========================
# Geo Êï∞ÊçÆËé∑Âèñ
# =========================
geodata-mode: true
geo-auto-update: true
geodata-loader: standard
geo-update-interval: 24
geox-url:
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://testingcf.jsdelivr.net/gh/xishang0128/geoip@release/GeoLite2-ASN.mmdb

# =========================
# ËßÑÂàôÈõÜËé∑Âèñ
# =========================
### ËßÑÂàôÈÖçÁΩÆ
# rule_provider_classical: &rule_provider_classical
#   type: http
#   format: yaml
#   behavior: classical
#   interval: 86400

rule_provider_domain: &rule_provider_domain
  type: http
  format: yaml
  behavior: domain
  interval: 86400

rule_provider_ipcidr: &rule_provider_ipcidr
  type: http
  format: yaml
  behavior: ipcidr
  interval: 86400

rule_provider_text: &rule_provider_text
  type: http
  format: text
  behavior: domain
  interval: 86400

rule-providers:
  fake_ip_filter:
    url: >-
      https://gh-proxy.com/https://raw.githubusercontent.com/DustinWin/ShellCrash/refs/heads/dev/public/fake_ip_filter.list
    path: ./rule_provider/fake_ip_filter.list
    <<: *rule_provider_text
  category-ads-all:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ads-all.yaml
    path: ./rule_provider/category-ads-all.yaml
    <<: *rule_provider_domain
  category-ai-!cn:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.yaml
    path: ./rule_provider/category-ai-!cn.yaml
    <<: *rule_provider_domain
  bilibili:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bilibili.yaml
    path: ./rule_provider/bilibili.yaml
    <<: *rule_provider_domain
  youtube:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.yaml
    path: ./rule_provider/youtube.yaml
    <<: *rule_provider_domain
  geolocation-cn:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-cn.yaml
    path: ./rule_provider/geolocation-cn.yaml
    <<: *rule_provider_domain
  github:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.yaml
    path: ./rule_provider/github.yaml
    <<: *rule_provider_domain
  gitlab:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/gitlab.yaml
    path: ./rule_provider/gitlab.yaml
    <<: *rule_provider_domain
  microsoft:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.yaml
    path: ./rule_provider/microsoft.yaml
    <<: *rule_provider_domain
  apple:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.yaml
    path: ./rule_provider/apple.yaml
    <<: *rule_provider_domain
  facebook:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.yaml
    path: ./rule_provider/facebook.yaml
    <<: *rule_provider_domain
  instagram:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/instagram.yaml
    path: ./rule_provider/instagram.yaml
    <<: *rule_provider_domain
  twitter:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/twitter.yaml
    path: ./rule_provider/twitter.yaml
    <<: *rule_provider_domain
  tiktok:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.yaml
    path: ./rule_provider/tiktok.yaml
    <<: *rule_provider_domain
  linkedin:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/linkedin.yaml
    path: ./rule_provider/linkedin.yaml
    <<: *rule_provider_domain
  netflix:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.yaml
    path: ./rule_provider/netflix.yaml
    <<: *rule_provider_domain
  hulu:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hulu.yaml
    path: ./rule_provider/hulu.yaml
    <<: *rule_provider_domain
  disney:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.yaml
    path: ./rule_provider/disney.yaml
    <<: *rule_provider_domain
  hbo:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.yaml
    path: ./rule_provider/hbo.yaml
    <<: *rule_provider_domain
  amazon:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.yaml
    path: ./rule_provider/amazon.yaml
    <<: *rule_provider_domain
  bahamut:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bahamut.yaml
    path: ./rule_provider/bahamut.yaml
    <<: *rule_provider_domain
  steam:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.yaml
    path: ./rule_provider/steam.yaml
    <<: *rule_provider_domain
  epicgames:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/epicgames.yaml
    path: ./rule_provider/epicgames.yaml
    <<: *rule_provider_domain
  ea:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ea.yaml
    path: ./rule_provider/ea.yaml
    <<: *rule_provider_domain
  ubisoft:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ubisoft.yaml
    path: ./rule_provider/ubisoft.yaml
    <<: *rule_provider_domain
  blizzard:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/blizzard.yaml
    path: ./rule_provider/blizzard.yaml
    <<: *rule_provider_domain
  coursera:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/coursera.yaml
    path: ./rule_provider/coursera.yaml
    <<: *rule_provider_domain
  edx:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/edx.yaml
    path: ./rule_provider/edx.yaml
    <<: *rule_provider_domain
  udemy:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/udemy.yaml
    path: ./rule_provider/udemy.yaml
    <<: *rule_provider_domain
  khanacademy:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/khanacademy.yaml
    path: ./rule_provider/khanacademy.yaml
    <<: *rule_provider_domain
  category-scholar-!cn:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-scholar-!cn.yaml
    path: ./rule_provider/category-scholar-!cn.yaml
    <<: *rule_provider_domain
  paypal:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/paypal.yaml
    path: ./rule_provider/paypal.yaml
    <<: *rule_provider_domain
  visa:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/visa.yaml
    path: ./rule_provider/visa.yaml
    <<: *rule_provider_domain
  mastercard:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/mastercard.yaml
    path: ./rule_provider/mastercard.yaml
    <<: *rule_provider_domain
  stripe:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/stripe.yaml
    path: ./rule_provider/stripe.yaml
    <<: *rule_provider_domain
  wise:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/wise.yaml
    path: ./rule_provider/wise.yaml
    <<: *rule_provider_domain
  aws:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/aws.yaml
    path: ./rule_provider/aws.yaml
    <<: *rule_provider_domain
  azure:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/azure.yaml
    path: ./rule_provider/azure.yaml
    <<: *rule_provider_domain
  digitalocean:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/digitalocean.yaml
    path: ./rule_provider/digitalocean.yaml
    <<: *rule_provider_domain
  heroku:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/heroku.yaml
    path: ./rule_provider/heroku.yaml
    <<: *rule_provider_domain
  dropbox:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/dropbox.yaml
    path: ./rule_provider/dropbox.yaml
    <<: *rule_provider_domain
  geolocation-!cn:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-!cn.yaml
    path: ./rule_provider/geolocation-!cn.yaml
    <<: *rule_provider_domain

  private:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/private.yaml
    path: ./rule_provider/ipcidr_private.yaml
    <<: *rule_provider_ipcidr
  google:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.yaml
    path: ./rule_provider/ipcidr_google.yaml
    <<: *rule_provider_ipcidr
  telegram:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.yaml
    path: ./rule_provider/ipcidr_telegram.yaml
    <<: *rule_provider_ipcidr
  cn:
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.yaml
    path: ./rule_provider/ipcidr_cn.yaml
    <<: *rule_provider_ipcidr

# =========================
# ËßÑÂàô
# =========================
rules:
  - DOMAIN-SUFFIX,glacier.top,DIRECT
  - RULE-SET,category-ads-all,üõë ÂπøÂëäÊã¶Êà™
  - RULE-SET,private,üè† ÁßÅÊúâÁΩëÁªú,no-resolve
  - RULE-SET,geolocation-cn,üéØ ÂÖ®ÁêÉÁõ¥Ëøû
  - RULE-SET,cn,üéØ ÂÖ®ÁêÉÁõ¥Ëøû,no-resolve

  - RULE-SET,category-ai-!cn,üí¨ AI ÊúçÂä°
  - RULE-SET,tiktok,üåê TikTok
  - RULE-SET,bilibili,üì∫ ÂìîÂì©ÂìîÂì©
  - RULE-SET,google,üîç Ë∞∑Ê≠åÊúçÂä°,no-resolve
  - RULE-SET,youtube,üìπ Ê≤πÁÆ°ËßÜÈ¢ë
  - RULE-SET,github,üê± Github
  - RULE-SET,gitlab,üê± Github
  - RULE-SET,microsoft,‚ìÇÔ∏è ÂæÆËΩØÊúçÂä°
  - RULE-SET,apple,üçè ËãπÊûúÊúçÂä°
  - RULE-SET,telegram,üì≤ ÁîµÊä•Ê∂àÊÅØ,no-resolve
  - RULE-SET,facebook,üåê Á§æ‰∫§Â™í‰Ωì
  - RULE-SET,instagram,üåê Á§æ‰∫§Â™í‰Ωì
  - RULE-SET,twitter,üåê Á§æ‰∫§Â™í‰Ωì
  - RULE-SET,linkedin,üåê Á§æ‰∫§Â™í‰Ωì

  - RULE-SET,netflix,üé¨ ÊµÅÂ™í‰Ωì
  - RULE-SET,hulu,üé¨ ÊµÅÂ™í‰Ωì
  - RULE-SET,disney,üé¨ ÊµÅÂ™í‰Ωì
  - RULE-SET,hbo,üé¨ ÊµÅÂ™í‰Ωì
  - RULE-SET,amazon,üé¨ ÊµÅÂ™í‰Ωì
  - RULE-SET,bahamut,üé¨ ÊµÅÂ™í‰Ωì

  - RULE-SET,steam,üéÆ Ê∏∏ÊàèÂπ≥Âè∞
  - RULE-SET,epicgames,üéÆ Ê∏∏ÊàèÂπ≥Âè∞
  - RULE-SET,ea,üéÆ Ê∏∏ÊàèÂπ≥Âè∞
  - RULE-SET,ubisoft,üéÆ Ê∏∏ÊàèÂπ≥Âè∞
  - RULE-SET,blizzard,üéÆ Ê∏∏ÊàèÂπ≥Âè∞
  - RULE-SET,coursera,üìö ÊïôËÇ≤ËµÑÊ∫ê
  - RULE-SET,edx,üìö ÊïôËÇ≤ËµÑÊ∫ê
  - RULE-SET,udemy,üìö ÊïôËÇ≤ËµÑÊ∫ê
  - RULE-SET,khanacademy,üìö ÊïôËÇ≤ËµÑÊ∫ê
  - RULE-SET,category-scholar-!cn,üìö ÊïôËÇ≤ËµÑÊ∫ê
  - RULE-SET,paypal,üí∞ ÈáëËûçÊúçÂä°
  - RULE-SET,visa,üí∞ ÈáëËûçÊúçÂä°
  - RULE-SET,mastercard,üí∞ ÈáëËûçÊúçÂä°
  - RULE-SET,stripe,üí∞ ÈáëËûçÊúçÂä°
  - RULE-SET,wise,üí∞ ÈáëËûçÊúçÂä°
  - RULE-SET,aws,‚òÅÔ∏è ‰∫ëÊúçÂä°
  - RULE-SET,azure,‚òÅÔ∏è ‰∫ëÊúçÂä°
  - RULE-SET,digitalocean,‚òÅÔ∏è ‰∫ëÊúçÂä°
  - RULE-SET,heroku,‚òÅÔ∏è ‰∫ëÊúçÂä°
  - RULE-SET,dropbox,‚òÅÔ∏è ‰∫ëÊúçÂä°

  - RULE-SET,geolocation-!cn,üåê ÂÖ®ÁêÉ‰ª£ÁêÜ,no-resolve
  - MATCH,üêü ÊºèÁΩë‰πãÈ±º

# =========================
# TUN Âº∫Âà∂Êé•ÁÆ°Ê®°Âºè
# =========================
tun:
  enable: true
  stack: gvisor
  auto-route: true
  auto-detect-interface: true
  auto-redirect: true
  strict-route: true
  dns-hijack:
    - any:53

# =========================
# DNS ÈÖçÁΩÆ
# =========================
dns:
  enable: true
  prefer-h3: false
  ipv6: false
  use-hosts: true
  use-system-hosts: false
  respect-rules: true

  cache-algorithm: arc
  cache-max-size: 4096

  listen: 0.0.0.0:7874
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-ttl: 300

  fake-ip-filter:
    - rule-set:fake_ip_filter
    # Ëá™ÂÆö‰πâÂüüÂêç
    - "+.glacier.top"
    # Êú∫Âú∫
    - "*.ali66mysql.com"

  # ‰øùËØÅÁõ¥ËøûÂüüÂêçÂè™Ëµ∞ direct-nameserver / nameserverÔºå‰∏çË¢´ fallback Âπ≤Êâ∞
  direct-nameserver-follow-policy: false

  # ‰ªÖÁî®‰∫éËß£Êûê DNS ÊúçÂä°Âô®ÂüüÂêçÔºàÈò≤Ê≠ªÂæ™ÁéØÔºâ
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 8.8.8.8
    - 1.1.1.1

  # ÂÖ®Â±ÄÈªòËÆ§Âä†ÂØÜ DNS
  nameserver:
    - https://dns.alidns.com/dns-query#h3=true
    - https://doh.pub/dns-query

  # ‰ª£ÁêÜËäÇÁÇπ‰∏ìÂ±û DNSÔºàÊ†∏ÂøÉÔºöÈò≤Ëß£ÊûêÊ≠ªÂæ™ÁéØÔºâ
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query#h3=true
    - https://doh.pub/dns-query

  # fallback ‰ªÖ‰Ωú‰∏∫‰øùÈô©
  fallback:
    - https://dns.cloudflare.com/dns-query
    - https://dns.google/dns-query

  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
    domain:
      - "+.github.com"
    geosite:
      - gfw
