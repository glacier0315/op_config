# =========================
# ä»£ç†è®¢é˜…
# =========================
### èŠ‚ç‚¹æ± é…ç½®
ProxyProvidersSet: &ProxyProvidersSet
  type: http
  proxy: DIRECT
  interval: 86400
  health-check:
    enable: true
    url: "https://www.gstatic.com/generate_204"
    interval: 600
  override:
    udp: true
    additional-prefix: ""
    skip-cert-verify: true
  exclude-filter: "(?i)(è¿‡æœŸæ—¶é—´)|(å‰©ä½™æµé‡)|(TGç¾¤)|(å®˜ç½‘)"

proxy-providers:
  # æœºåœºåç§°
  sub1:
    # æœºåœºè®¢é˜…åœ°å€
    url: https://your-subscribe.example.com/sub1?token=xxxxx
    path: "./proxy_provider/sub1.yaml"
    <<: *ProxyProvidersSet
    override:
      additional-prefix: "sub1-"
    # è®¢é˜…èŠ‚ç‚¹çš„ User-Agent
    header:
      User-Agent:
        - passwall
  sub2:
    # æœºåœºè®¢é˜…åœ°å€
    url: https://your-subscribe.example.com/sub2?token=xxxxx
    path: "./proxy_provider/sub2.yaml"
    <<: *ProxyProvidersSet
    override:
      additional-prefix: "sub2-"

# =========================
# åŸºç¡€é…ç½®
# =========================
mixed-port: 7890
allow-lan: true
# Clash è·¯ç”±å·¥ä½œæ¨¡å¼
# rule: åŸºäºè§„åˆ™çš„æ•°æ®åŒ…è·¯ç”±
# global: æ‰€æœ‰æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°å•ä¸ªèŠ‚ç‚¹
# direct: ç›´æ¥å°†æ•°æ®åŒ…è½¬å‘åˆ°äº’è”ç½‘
mode: rule
ipv6: false # å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•
log-level: warning
tcp-concurrent: true

#  find-process-mode has 3 values:always, strict, off
#  - always, å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
#  - strict, é»˜è®¤ï¼Œç”± mihomo åˆ¤æ–­æ˜¯å¦å¼€å¯
#  - off, ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: strict

# =========================
# å¤–éƒ¨æ§åˆ¶å™¨é…ç½®
# =========================
external-controller: 0.0.0.0:9090
secret: "1234456"

# =========================
# ç«¯å£ç›‘å¬é…ç½®ï¼ˆå¯é€‰ï¼‰
# ä¾‹å¦‚ï¼š
#  - Steam å¼ºåˆ¶ç¾åŒº
#  - TikTok å¼ºåˆ¶å°æ¹¾
#  - ChatGPT å¼ºåˆ¶ç¾å›½
# =========================
# listeners:
#   - { name: mixed0, type: mixed, port: 42000, proxy: ğŸš€ å°æ¹¾ }
#   - { name: mixed1, type: mixed, port: 42001, proxy: ğŸš€ ç¾å›½ }

# =========================
# é…ç½®æ–‡ä»¶ç®¡ç†
# =========================
profile:
  store-selected: true # å­˜å‚¨ select é€‰æ‹©è®°å½•
  store-fake-ip: true # æŒä¹…åŒ– fake-ip

proxies:
  # # é“¾å¼ä»£ç†
  # - name: ğŸš€ é“¾å¼å‡ºå£
  #   type: socks5
  #   server:
  #   port:
  #   username:
  #   password:
  #   dialer-proxy: ğŸš€ é¦™æ¸¯

# =========================
# ä»£ç†ç»„é…ç½®
# =========================
# - include-all-proxies: true  åŒ…å«æ‰‹åŠ¨èŠ‚ç‚¹
# - use: [è®¢é˜…1, è®¢é˜…2, è®¢é˜…3, è®¢é˜…4, è®¢é˜…5] åŒ…å«è®¢é˜…èŠ‚ç‚¹
# - domain-strategy: ipv4-only å¼ºåˆ¶ä»…ä½¿ç”¨ IPv4
# =========================

### ç­–ç•¥ç»„åŸºç¡€é…ç½®
Select: &Select
  type: select
  url: "https://www.gstatic.com/generate_204"
  disable-udp: false
  hidden: false
  include-all: true

UrlTest: &UrlTest
  type: url-test
  url: "https://www.gstatic.com/generate_204"
  interval: 180
  lazy: true
  tolerance: 50
  timeout: 2000
  disable-udp: false
  max-failed-times: 3
  hidden: true
  include-all: true

FallBack: &FallBack
  type: fallback
  url: "https://www.gstatic.com/generate_204"
  interval: 180
  lazy: true
  timeout: 2000
  disable-udp: false
  max-failed-times: 3
  hidden: true
  include-all: true

LoadBalance: &LoadBalance
  type: load-balance
  url: "https://www.gstatic.com/generate_204"
  interval: 180
  lazy: true
  disable-udp: false
  strategy: consistent-hashing
  timeout: 2000
  max-failed-times: 3
  hidden: true
  include-all: true

proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - âš¡ è‡ªåŠ¨é€‰æ‹©
      - ğŸ–ï¸ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸš€ é¦™æ¸¯
      - ğŸš€ å°æ¹¾
      - ğŸš€ æ—¥æœ¬
      - ğŸš€ æ–°åŠ å¡
      - ğŸš€ ç¾å›½
      - ğŸš€ å…¶ä»–
      # - ğŸš€ é“¾å¼å‡ºå£
      - DIRECT
      - REJECT

  - name: âš¡ è‡ªåŠ¨é€‰æ‹©
    <<: *UrlTest
    hidden: false
    filter: ^((?!(ç›´è¿|DIRECT|æ‹’ç»|REJECT)).)*$

  - name: ğŸ–ï¸ æ‰‹åŠ¨åˆ‡æ¢
    <<: *Select
    filter: ^((?!(ç›´è¿|DIRECT|æ‹’ç»|REJECT)).)*$

  - type: select
    name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    proxies: &node-select-proxies
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - âš¡ è‡ªåŠ¨é€‰æ‹©
      - ğŸ–ï¸ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸš€ é¦™æ¸¯
      - ğŸš€ å°æ¹¾
      - ğŸš€ æ—¥æœ¬
      - ğŸš€ æ–°åŠ å¡
      - ğŸš€ ç¾å›½
      - ğŸš€ å…¶ä»–
      # - ğŸš€ é“¾å¼å‡ºå£
      - DIRECT
      - REJECT

  - type: select
    name: ğŸ’¬ AI æœåŠ¡
    proxies: *node-select-proxies
  - type: select
    name: ğŸ“º å“”å“©å“”å“©
    proxies: *node-select-proxies
  - type: select
    name: ğŸ“¹ æ²¹ç®¡è§†é¢‘
    proxies: *node-select-proxies
  - type: select
    name: ğŸ” è°·æ­ŒæœåŠ¡
    proxies: *node-select-proxies
  - type: select
    name: ğŸ  ç§æœ‰ç½‘ç»œ
    proxies: *node-select-proxies
  - type: select
    name: ğŸ¯ å…¨çƒç›´è¿
    proxies: *node-select-proxies
  - type: select
    name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯
    proxies: *node-select-proxies
  - type: select
    name: ğŸ± Github
    proxies: *node-select-proxies
  - type: select
    name: â“‚ï¸ å¾®è½¯æœåŠ¡
    proxies: *node-select-proxies
  - type: select
    name: ğŸ è‹¹æœæœåŠ¡
    proxies: *node-select-proxies
  - type: select
    name: ğŸŒ TikTok
    proxies: *node-select-proxies
  - type: select
    name: ğŸŒ ç¤¾äº¤åª’ä½“
    proxies: *node-select-proxies
  - type: select
    name: ğŸ¬ æµåª’ä½“
    proxies: *node-select-proxies
  - type: select
    name: ğŸ® æ¸¸æˆå¹³å°
    proxies: *node-select-proxies
  - type: select
    name: ğŸ“š æ•™è‚²èµ„æº
    proxies: *node-select-proxies
  - type: select
    name: ğŸ’° é‡‘èæœåŠ¡
    proxies: *node-select-proxies
  - type: select
    name: â˜ï¸ äº‘æœåŠ¡
    proxies: *node-select-proxies
  - type: select
    name: ğŸŒ éä¸­å›½
    proxies: *node-select-proxies
  - type: select
    name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    proxies: *node-select-proxies

  # é¦™æ¸¯ç»„
  - name: ğŸš€ é¦™æ¸¯
    <<: *LoadBalance
    hidden: false
    filter: "(?=.*(å¹¿æ¸¯|é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong)).*$"

  # å°æ¹¾ç»„
  - name: ğŸš€ å°æ¹¾
    <<: *FallBack
    hidden: false
    filter: "(?=.*(å¹¿å°|å°æ¹¾|å°ç£|TW|Tai Wan|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|TaiWan|Taiwan)).*$"
    exclude-filter: "(?=.*(å°æ¹¾3)).*$"

  # æ—¥æœ¬ç»„
  - name: ğŸš€ æ—¥æœ¬
    type: select
    include-all: true
    filter: "(?=.*(å¹¿æ—¥|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|Japan)).*$"

  # æ–°åŠ å¡ç»„
  - name: ğŸš€ æ–°åŠ å¡
    <<: *LoadBalance
    hidden: false
    filter: "(?=.*(å¹¿æ–°|æ–°åŠ å¡|SG|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore)).*$"
    exclude-filter: "(?=.*(æ–°åŠ å¡1|VIP1)).*$"

  # ç¾å›½ç»„
  - name: ğŸš€ ç¾å›½
    type: select
    include-all: true
    filter: "(?=.*(å¹¿ç¾|US|ç¾å›½|çº½çº¦|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’|å‡¤å‡°åŸ|è´¹åˆ©è’™|æ´›æ‰|åœ£ä½•å¡|åœ£å…‹æ‹‰|è¥¿é›…|èŠåŠ |ğŸ‡ºğŸ‡¸|United States)).*$"

  # å…¶ä»–ç»„
  - name: ğŸš€ å…¶ä»–
    type: select
    include-all: true
    filter: "^((?!(ç›´è¿|DIRECT|æ‹’ç»|REJECT|å¹¿æ¸¯|é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong|å¹¿å°|å°æ¹¾|å°ç£|TW|Tai Wan|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|TaiWan|Taiwan|å¹¿æ—¥|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|Japan|å¹¿æ–°|æ–°åŠ å¡|SG|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore|å¹¿ç¾|US|ç¾å›½|çº½çº¦|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’|å‡¤å‡°åŸ|è´¹åˆ©è’™|æ´›æ‰|åœ£ä½•å¡|åœ£å…‹æ‹‰|è¥¿é›…|èŠåŠ |ğŸ‡ºğŸ‡¸|United States)).)*$"

# =========================
# Geo æ•°æ®è·å–
# =========================
geodata-mode: true
geo-auto-update: true
geodata-loader: standard
geo-update-interval: 24
geox-url:
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb

# =========================
# è§„åˆ™é›†è·å–
# =========================
rule-providers:
  fake_ip_filter:
    type: http
    format: text
    behavior: domain
    url: >-
      https://gh-proxy.com/https://raw.githubusercontent.com/DustinWin/ShellCrash/refs/heads/dev/public/fake_ip_filter.list
    path: ./ruleset/fake_ip_filter.list
    interval: 86400
  category-ads-all:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ads-all.yaml
    path: ./ruleset/category-ads-all.yaml
    interval: 86400
  category-ai-!cn:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.yaml
    path: ./ruleset/category-ai-!cn.yaml
    interval: 86400
  bilibili:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bilibili.yaml
    path: ./ruleset/bilibili.yaml
    interval: 86400
  youtube:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.yaml
    path: ./ruleset/youtube.yaml
    interval: 86400
  geolocation-cn:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-cn.yaml
    path: ./ruleset/geolocation-cn.yaml
    interval: 86400
  github:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.yaml
    path: ./ruleset/github.yaml
    interval: 86400
  gitlab:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/gitlab.yaml
    path: ./ruleset/gitlab.yaml
    interval: 86400
  microsoft:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.yaml
    path: ./ruleset/microsoft.yaml
    interval: 86400
  apple:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.yaml
    path: ./ruleset/apple.yaml
    interval: 86400
  facebook:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.yaml
    path: ./ruleset/facebook.yaml
    interval: 86400
  instagram:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/instagram.yaml
    path: ./ruleset/instagram.yaml
    interval: 86400
  twitter:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/twitter.yaml
    path: ./ruleset/twitter.yaml
    interval: 86400
  tiktok:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.yaml
    path: ./ruleset/tiktok.yaml
    interval: 86400
  linkedin:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/linkedin.yaml
    path: ./ruleset/linkedin.yaml
    interval: 86400
  netflix:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.yaml
    path: ./ruleset/netflix.yaml
    interval: 86400
  hulu:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hulu.yaml
    path: ./ruleset/hulu.yaml
    interval: 86400
  disney:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.yaml
    path: ./ruleset/disney.yaml
    interval: 86400
  hbo:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.yaml
    path: ./ruleset/hbo.yaml
    interval: 86400
  amazon:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.yaml
    path: ./ruleset/amazon.yaml
    interval: 86400
  bahamut:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bahamut.yaml
    path: ./ruleset/bahamut.yaml
    interval: 86400
  steam:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.yaml
    path: ./ruleset/steam.yaml
    interval: 86400
  epicgames:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/epicgames.yaml
    path: ./ruleset/epicgames.yaml
    interval: 86400
  ea:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ea.yaml
    path: ./ruleset/ea.yaml
    interval: 86400
  ubisoft:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ubisoft.yaml
    path: ./ruleset/ubisoft.yaml
    interval: 86400
  blizzard:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/blizzard.yaml
    path: ./ruleset/blizzard.yaml
    interval: 86400
  coursera:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/coursera.yaml
    path: ./ruleset/coursera.yaml
    interval: 86400
  edx:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/edx.yaml
    path: ./ruleset/edx.yaml
    interval: 86400
  udemy:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/udemy.yaml
    path: ./ruleset/udemy.yaml
    interval: 86400
  khanacademy:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/khanacademy.yaml
    path: ./ruleset/khanacademy.yaml
    interval: 86400
  category-scholar-!cn:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-scholar-!cn.yaml
    path: ./ruleset/category-scholar-!cn.yaml
    interval: 86400
  paypal:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/paypal.yaml
    path: ./ruleset/paypal.yaml
    interval: 86400
  visa:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/visa.yaml
    path: ./ruleset/visa.yaml
    interval: 86400
  mastercard:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/mastercard.yaml
    path: ./ruleset/mastercard.yaml
    interval: 86400
  stripe:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/stripe.yaml
    path: ./ruleset/stripe.yaml
    interval: 86400
  wise:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/wise.yaml
    path: ./ruleset/wise.yaml
    interval: 86400
  aws:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/aws.yaml
    path: ./ruleset/aws.yaml
    interval: 86400
  azure:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/azure.yaml
    path: ./ruleset/azure.yaml
    interval: 86400
  digitalocean:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/digitalocean.yaml
    path: ./ruleset/digitalocean.yaml
    interval: 86400
  heroku:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/heroku.yaml
    path: ./ruleset/heroku.yaml
    interval: 86400
  dropbox:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/dropbox.yaml
    path: ./ruleset/dropbox.yaml
    interval: 86400
  geolocation-!cn:
    type: http
    format: yaml
    behavior: domain
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-!cn.yaml
    path: ./ruleset/geolocation-!cn.yaml
    interval: 86400

  private:
    type: http
    format: yaml
    behavior: ipcidr
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/private.yaml
    path: ./ruleset/ipcidr/private.yaml
    interval: 86400
  google:
    type: http
    format: yaml
    behavior: ipcidr
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.yaml
    path: ./ruleset/ipcidr/google.yaml
    interval: 86400
  telegram:
    type: http
    format: yaml
    behavior: ipcidr
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.yaml
    path: ./ruleset/ipcidr/telegram.yaml
    interval: 86400
  cn:
    type: http
    format: yaml
    behavior: ipcidr
    url: >-
      https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.yaml
    path: ./ruleset/ipcidr/cn.yaml
    interval: 86400

# =========================
# è§„åˆ™
# =========================
rules:
  - DOMAIN-SUFFIX,glacier.top,DIRECT
  - RULE-SET,category-ads-all,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,private,ğŸ  ç§æœ‰ç½‘ç»œ,no-resolve
  - RULE-SET,geolocation-cn,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn,ğŸ¯ å…¨çƒç›´è¿,no-resolve

  - RULE-SET,category-ai-!cn,ğŸ’¬ AI æœåŠ¡
  - RULE-SET,tiktok,ğŸŒ TikTok
  - RULE-SET,bilibili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,google,ğŸ” è°·æ­ŒæœåŠ¡,no-resolve
  - RULE-SET,youtube,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,github,ğŸ± Github
  - RULE-SET,gitlab,ğŸ± Github
  - RULE-SET,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  - RULE-SET,facebook,ğŸŒ ç¤¾äº¤åª’ä½“
  - RULE-SET,instagram,ğŸŒ ç¤¾äº¤åª’ä½“
  - RULE-SET,twitter,ğŸŒ ç¤¾äº¤åª’ä½“
  - RULE-SET,linkedin,ğŸŒ ç¤¾äº¤åª’ä½“

  - RULE-SET,netflix,ğŸ¬ æµåª’ä½“
  - RULE-SET,hulu,ğŸ¬ æµåª’ä½“
  - RULE-SET,disney,ğŸ¬ æµåª’ä½“
  - RULE-SET,hbo,ğŸ¬ æµåª’ä½“
  - RULE-SET,amazon,ğŸ¬ æµåª’ä½“
  - RULE-SET,bahamut,ğŸ¬ æµåª’ä½“

  - RULE-SET,steam,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,epicgames,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ea,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ubisoft,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,blizzard,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,coursera,ğŸ“š æ•™è‚²èµ„æº
  - RULE-SET,edx,ğŸ“š æ•™è‚²èµ„æº
  - RULE-SET,udemy,ğŸ“š æ•™è‚²èµ„æº
  - RULE-SET,khanacademy,ğŸ“š æ•™è‚²èµ„æº
  - RULE-SET,category-scholar-!cn,ğŸ“š æ•™è‚²èµ„æº
  - RULE-SET,paypal,ğŸ’° é‡‘èæœåŠ¡
  - RULE-SET,visa,ğŸ’° é‡‘èæœåŠ¡
  - RULE-SET,mastercard,ğŸ’° é‡‘èæœåŠ¡
  - RULE-SET,stripe,ğŸ’° é‡‘èæœåŠ¡
  - RULE-SET,wise,ğŸ’° é‡‘èæœåŠ¡
  - RULE-SET,aws,â˜ï¸ äº‘æœåŠ¡
  - RULE-SET,azure,â˜ï¸ äº‘æœåŠ¡
  - RULE-SET,digitalocean,â˜ï¸ äº‘æœåŠ¡
  - RULE-SET,heroku,â˜ï¸ äº‘æœåŠ¡
  - RULE-SET,dropbox,â˜ï¸ äº‘æœåŠ¡

  - RULE-SET,geolocation-!cn,ğŸŒ éä¸­å›½,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# =========================
# TUN å¼ºåˆ¶æ¥ç®¡æ¨¡å¼
# =========================
tun:
  enable: false
  stack: gvisor
  auto-route: true # é…ç½®è·¯ç”±è¡¨
  auto-detect-interface: true # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡
  auto-redirect: true # è‡ªåŠ¨é…ç½® iptables ä»¥é‡å®šå‘ TCP è¿æ¥ã€‚ä»…æ”¯æŒ Linuxã€‚å¸¦æœ‰ auto-redirect çš„ auto-route ç°åœ¨å¯ä»¥åœ¨è·¯ç”±å™¨ä¸ŠæŒ‰é¢„æœŸå·¥ä½œï¼Œæ— éœ€å¹²é¢„ã€‚
  # strict-route: true # å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun æ¥é˜²æ­¢æ³„æ¼ï¼Œä½†ä½ çš„è®¾å¤‡å°†æ— æ³•å…¶ä»–è®¾å¤‡è¢«è®¿é—®
  # disable-icmp-forwarding: true # ç¦ç”¨ ICMP è½¬å‘ï¼Œé˜²æ­¢æŸäº›æƒ…å†µä¸‹çš„ ICMP ç¯å›é—®é¢˜ï¼Œping å°†ä¸ä¼šæ˜¾ç¤ºçœŸå®çš„å»¶è¿Ÿ
  dns-hijack:
    - any:53
    - tcp://any:53

# =========================
# DNS æé™é˜²æ³„éœ²é…ç½®
# =========================
dns:
  enable: true
  prefer-h3: false
  ipv6: false # false å°†è¿”å› AAAA çš„ç©ºç»“æœ
  use-hosts: true
  use-system-hosts: false
  respect-rules: true

  cache-algorithm: arc
  cache-max-size: 8192

  listen: 0.0.0.0:7874
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-ttl: 300

  fake-ip-filter:
    # å±€åŸŸç½‘åŸŸå
    - "*.lan"
    - "*.local"
    - "*.localdomain"
    - "*.home.arpa"
    # QQ æœ¬åœ°è®¤è¯
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    # STUN
    - "stun.*"
    # NTP / æ—¶é—´åŒæ­¥
    - "time.*"
    - "*.ntp.org"
    - "*.ntp.org.cn"
    - "*.time.edu.cn"
    # Microsoft è¿é€šæ€§æ£€æµ‹
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    # ä½ çš„è‡ªå®šä¹‰åŸŸ
    - "+.glacier.top"
    # æœºåœº
    - "*.ali66mysql.com"
    # fakeip-filter ä¸º rule-providers ä¸­çš„åä¸º fakeip-filter è§„åˆ™è®¢é˜…ï¼Œ
    # ä¸” behavior å¿…é¡»ä¸º domain/classicalï¼Œå½“ä¸º classical æ—¶ä»…ä¼šç”Ÿæ•ˆåŸŸåç±»è§„åˆ™
    - rule-set:fake_ip_filter
    # # fakeip-filter ä¸º geosite ä¸­åä¸º fakeip-filter çš„åˆ†ç±»ï¼ˆéœ€è¦è‡ªè¡Œä¿è¯è¯¥åˆ†ç±»å­˜åœ¨ï¼‰
    # - geosite:fakeip-filter

  # å¯åŠ¨é˜¶æ®µè§£æ
  default-nameserver:
    - tls://1.1.1.1:853
    - tls://8.8.8.8:853

  # ä¸» DNS
  nameserver:
    - https://dns.cloudflare.com/dns-query
    - https://dns.google/dns-query
    - tls://1.1.1.1:853
    - tls://8.8.8.8:853

  # è§£æ ä»£ç†æœåŠ¡å™¨åŸŸå
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

  # ç”¨äº directï¼ˆå›½å†…ï¼‰è§£æçš„ä¸Šæ¸¸ï¼Œå»ºè®®ä¸ºå›½å†…è¿è¥å•†è§£æå™¨æˆ–å·²åŠ å¯†çš„å›½å†… DoT/DoH
  direct-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

  # # å›½å¤– DNS
  # fallback:
  #   - https://dns.cloudflare.com/dns-query
  #   - https://dns.google/dns-query
  #   - tls://1.1.1.1:853
  #   - tls://8.8.8.8:853

  # # fallback ä»…ä½œä¸ºä¿é™©
  # fallback-filter:
  #   geoip: true
  #   geoip-code: CN
  #   ipcidr:
  #     - 240.0.0.0/4
  #     - 0.0.0.0/32

  # å¯é€‰ï¼šæ ¹æ®åŸŸå/è§„åˆ™é€‰æ‹©ä¸åŒä¸Šæ¸¸ï¼Œåšåˆ°å›½å†…èµ° direct-nameserverï¼Œæµ·å¤–èµ° nameserver
  nameserver-policy:
    "geosite:cn,apple,rule-set:private": direct-nameserver
    "geolocation:!cn,geosite:category-!*": nameserver
    "geosite:category-ads-all": rcode://success
